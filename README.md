# 🚀 Bootcamp CI/CD Demo – Azure DevOps → Azure App Service

This repository contains a **Node.js + Express demo application** and a ready-to-use **Azure DevOps pipeline** that automates build and deployment to **Azure App Service**.  
It is designed for **The Cloud Bootcamp Hands‑on Challenge Day** on CI/CD.

---

## 📖 Overview

- **App:** Minimal Express server with:
  - `/` → returns **Hello Bootcamp!**
  - `/health` → returns **OK**
- **Pipeline:** Azure DevOps YAML with two stages:
  - **Build** → Install Node.js, run npm install/test, package app.zip, publish artifact
  - **Deploy** → Download artifact, deploy to Azure App Service
- **Target:** Azure App Service (Free F1 plan supported)

---

## 🛠 Prerequisites

- [Node.js 20.x](https://nodejs.org/en/download/) installed locally
- [Azure Subscription](https://azure.microsoft.com/free/) (Free Tier is enough)
- [Azure DevOps Organization](https://dev.azure.com/)
- [Git](https://git-scm.com/downloads)

---

## 📂 Project Structure

```
bootcamp-cicd-demo/
├── app.js                # Express app entry point
├── package.json          # Node.js metadata + start script
├── azure-pipelines.yml   # CI/CD pipeline definition
├── .gitignore            # Ignore unnecessary files
└── README.md             # Documentation
```

---

## 🚀 Getting Started

### 1. Clone the repo
```bash
git clone https://github.com/josephjem2/bootcamp-cicd-demo.git
cd bootcamp-cicd-demo
```

### 2. Run locally
```bash
npm install
npm start
```
- Visit: [http://localhost:3000](http://localhost:3000) → `Hello Bootcamp!`
- Health check: [http://localhost:3000/health](http://localhost:3000/health) → `OK`

---

## ⚙️ Azure Setup

1. **Create App Service (Free F1 Plan)**
   - Azure Portal → Create Resource → Web App
   - Runtime: Node.js 20, Windows OS
   - Plan: Free (F1)

2. **Configure Health Check**
   - App Service → Monitoring → Health check → Path `/health`

---

## 🔄 Azure DevOps Pipeline

The pipeline is defined in [`azure-pipelines.yml`](./azure-pipelines.yml).

### Stages
- **Build Stage**
  - Installs Node.js 20.x
  - Runs `npm install` + `npm test`
  - Archives app into `app.zip`
  - Publishes artifact

- **Deploy Stage**
  - Downloads artifact
  - Deploys to Azure App Service using `AzureWebApp@1`

### Requirements
- **Service Connection:** Create an Azure Resource Manager connection named `AzureBootcampConnection`
- **Agent Pool:** Use `Default` (self-hosted agent recommended for free tier)

---

## 🧩 Troubleshooting

- **Error: “No hosted parallelism has been purchased”**  
  → Use a self-hosted agent (`pool: name: 'Default'`).

- **Error: “You do not have permission to view this directory or page”**  
  → Ensure `app.js` is at the root of the ZIP and `package.json` has `"start": "node app.js"`.

- **App not starting**  
  → Check App Service logs: Portal → Diagnose and solve problems → Log stream.

---

## 📘 About `.gitignore`

This project includes a `.gitignore` file to keep the repository clean and professional:

- **node_modules/** → Prevents dependency bloat (reinstalled via `npm install`).  
- **Logs & temp files** → Avoids clutter from local runs.  
- **Build artifacts (`.zip`)** → These are generated by the pipeline, not stored in Git.  
- **.env files** → Protects secrets and environment variables from being committed.  
- **Editor/OS files** → Ignores `.vscode/`, `.DS_Store`, `Thumbs.db`, etc.  

👉 Keeping a proper `.gitignore` ensures that only **source code and configuration** live in the repo, while everything else is reproducible or environment‑specific.

---

## 📚 References

- [Get started with Azure App Service](https://learn.microsoft.com/en-us/azure/app-service/getting-started)  
- [Build Node.js apps with Azure Pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/javascript?view=azure-devops)  
- [Using Azure’s F1 Free Plan](https://dev.to/dhanushreddy29/using-azures-f1-free-plan-to-host-a-rest-api-3l4m)  
- [Deploy Node.js Web App with Azure DevOps](https://dev.to/s3cloudhub/how-to-deploy-a-nodejs-web-app-on-azure-devops-a-step-by-step-guide-2bf9)  
- [Video: Build & Deploy Node.js Apps with Azure DevOps](https://www.youtube.com/watch?v=fdFENpeQWi0)  

Would you like me to also generate the **actual `.gitignore` file content** (ready to paste into your repo alongside this README) so everything is consistent?
