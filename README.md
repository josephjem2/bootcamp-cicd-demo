# ğŸš€ Bootcamp CI/CD Demo â€“ Azure DevOps â†’ Azure App Service

This repository contains a **Node.js + Express demo application** and a ready-to-use **Azure DevOps pipeline** that automates build and deployment to **Azure App Service**.  
It is designed for **The Cloud Bootcamp Handsâ€‘on Challenge Day** on CI/CD.

---

## ğŸ“– Overview

- **App:** Minimal Express server with:
  - `/` â†’ returns **Hello Bootcamp!**
  - `/health` â†’ returns **OK**
- **Pipeline:** Azure DevOps YAML with two stages:
  - **Build** â†’ Install Node.js, run npm install/test, package app.zip, publish artifact
  - **Deploy** â†’ Download artifact, deploy to Azure App Service
- **Target:** Azure App Service (Free F1 plan supported)

---

## ğŸ›  Prerequisites

- [Node.js 20.x](https://nodejs.org/en/download/) installed locally
- [Azure Subscription](https://azure.microsoft.com/free/) (Free Tier is enough)
- [Azure DevOps Organization](https://dev.azure.com/)
- [Git](https://git-scm.com/downloads)

---

## ğŸ“‚ Project Structure

```
bootcamp-cicd-demo/
â”œâ”€â”€ app.js                # Express app entry point
â”œâ”€â”€ package.json          # Node.js metadata + start script
â”œâ”€â”€ azure-pipelines.yml   # CI/CD pipeline definition
â”œâ”€â”€ .gitignore            # Ignore unnecessary files
â””â”€â”€ README.md             # Documentation
```

---

## ğŸš€ Getting Started

### 1. Clone the repo
```bash
git clone https://github.com/josephjem2/bootcamp-cicd-demo.git
cd bootcamp-cicd-demo
```

### 2. Run locally
```bash
npm install
npm start
```
- Visit: [http://localhost:3000](http://localhost:3000) â†’ `Hello Bootcamp!`
- Health check: [http://localhost:3000/health](http://localhost:3000/health) â†’ `OK`

---

## âš™ï¸ Azure Setup

1. **Create App Service (Free F1 Plan)**
   - Azure Portal â†’ Create Resource â†’ Web App
   - Runtime: Node.js 20, Windows OS
   - Plan: Free (F1)

2. **Configure Health Check**
   - App Service â†’ Monitoring â†’ Health check â†’ Path `/health`

---

## ğŸ”„ Azure DevOps Pipeline

The pipeline is defined in [`azure-pipelines.yml`](./azure-pipelines.yml).

### Stages
- **Build Stage**
  - Installs Node.js 20.x
  - Runs `npm install` + `npm test`
  - Archives app into `app.zip`
  - Publishes artifact

- **Deploy Stage**
  - Downloads artifact
  - Deploys to Azure App Service using `AzureWebApp@1`

### Requirements
- **Service Connection:** Create an Azure Resource Manager connection named `AzureBootcampConnection`
- **Agent Pool:** Use `Default` (self-hosted agent recommended for free tier)

---

## ğŸ§© Troubleshooting

- **Error: â€œNo hosted parallelism has been purchasedâ€**  
  â†’ Use a self-hosted agent (`pool: name: 'Default'`).

- **Error: â€œYou do not have permission to view this directory or pageâ€**  
  â†’ Ensure `app.js` is at the root of the ZIP and `package.json` has `"start": "node app.js"`.

- **App not starting**  
  â†’ Check App Service logs: Portal â†’ Diagnose and solve problems â†’ Log stream.

---

## ğŸ“˜ About `.gitignore`

This project includes a `.gitignore` file to keep the repository clean and professional:

- **node_modules/** â†’ Prevents dependency bloat (reinstalled via `npm install`).  
- **Logs & temp files** â†’ Avoids clutter from local runs.  
- **Build artifacts (`.zip`)** â†’ These are generated by the pipeline, not stored in Git.  
- **.env files** â†’ Protects secrets and environment variables from being committed.  
- **Editor/OS files** â†’ Ignores `.vscode/`, `.DS_Store`, `Thumbs.db`, etc.  

ğŸ‘‰ Keeping a proper `.gitignore` ensures that only **source code and configuration** live in the repo, while everything else is reproducible or environmentâ€‘specific.

---

## ğŸ“š References

- [Get started with Azure App Service](https://learn.microsoft.com/en-us/azure/app-service/getting-started)  
- [Build Node.js apps with Azure Pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/javascript?view=azure-devops)  
- [Using Azureâ€™s F1 Free Plan](https://dev.to/dhanushreddy29/using-azures-f1-free-plan-to-host-a-rest-api-3l4m)  
- [Deploy Node.js Web App with Azure DevOps](https://dev.to/s3cloudhub/how-to-deploy-a-nodejs-web-app-on-azure-devops-a-step-by-step-guide-2bf9)  
- [Video: Build & Deploy Node.js Apps with Azure DevOps](https://www.youtube.com/watch?v=fdFENpeQWi0)  

Would you like me to also generate the **actual `.gitignore` file content** (ready to paste into your repo alongside this README) so everything is consistent?
